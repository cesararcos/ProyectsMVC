@model ProyectsMVC.Logica.Models.BindingModel.ProyectEditBindingModel


@{
    ViewBag.Title = "Edit";
}

<h2>Edit</h2>

@*<form action="/Proyect/Edit" method="post">*@
@Html.HiddenFor(m => m.Id)
<div class="form-row">
    <div class="col-md-12">
        @Html.LabelFor(m => m.Title)
        @Html.EditorFor(m => m.Title, new { htmlAttributes = new { @class = "form-control" } })

    </div>
</div>

<div class="form-row">
    <div class="col-md-12">
        @Html.LabelFor(m => m.Details)
        @Html.EditorFor(m => m.Details, new { htmlAttributes = new { @class = "form-control" } })

    </div>
</div>


<div class="form-row">
    <div class="col-md-12">
        @Html.LabelFor(m => m.ExpectedCompletionDate)
        @Html.EditorFor(m => m.ExpectedCompletionDate, new { htmlAttributes = new { @class = "form-control" } })

    </div>
</div>

<div class="form-row">
    <div class="col-md-12">
        <br />
        <button id="btnEditProyect" value="" class="btn btn-primary"><i class="fas fa-save"></i></button>
        @Html.ActionLink(" ", "Index", "Proyect", null, new { @class = "btn btn-primary fas fa-undo-alt" })
    </div>
</div>
@*</form>*@

<script>
    $(function () {
        $('#btnEditProyect').click(function () {
            EditProyect();
        });
    });

    function EditProyect() {

        var projectsEditBindingModel = {
            'Id': $('#Id').val(),
            'Title': $('#Title').val(),
            'Details': $('#Details').val(),
            'ExpectedCompletionDate': $('#ExpectedCompletionDate').val()
        };

        $.post('/ProjectsJson/Edit', projectsEditBindingModel).done(function (data) {
            var isSuccessful = data.IsSuccessful;

            if (isSuccessful) {
                window.location.href = '/ProjectsJson/Index';
            }
        });
    }
</script>